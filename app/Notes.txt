Permision for notifications and general alarm usage should be integrated on first start of the app, doesnt ask at all for now
Include it when using the camera for barcode scanner since permission will be needed there as well



####################################### Overlay Permission activated works
also overlay permission prompt: fun requestOverlayPermission(context: Context) {
                                    if (!Settings.canDrawOverlays(context)) {
                                        val intent = Intent(Settings.ACTION_MANAGE_OVERLAY_PERMISSION).apply {
                                            data = Uri.parse("package:${context.packageName}")
                                        }
                                        context.startActivity(intent)
                                    }
                                }



and battery optimization prompt:

@RequiresApi(Build.VERSION_CODES.M)
fun requestBatteryOptimizationExclusion(context: Context) {
    val powerManager = context.getSystemService(Context.POWER_SERVICE) as PowerManager
    val packageName = context.packageName

    if (!powerManager.isIgnoringBatteryOptimizations(packageName)) {
        val intent = Intent(Settings.ACTION_REQUEST_IGNORE_BATTERY_OPTIMIZATIONS).apply {
            data = Uri.parse("package:$packageName")
        }
        context.startActivity(intent)
    }
}


Ok when alarm was triggered go in the db and change activated to false,
